
/*
 * \class cfm_arbitration
 * \brief Intel(R) CoFluent(TM) Studio - Intel Corporation
 * \details Simulation model of DDRMemory generated by C++ Generator for SystemC/TLM2
 */
#include "cfm_arbitration.h"
#ifdef COFLUENT_CONTAINER_FUNCTION_CLASS_NAME
#undef COFLUENT_CONTAINER_FUNCTION_CLASS_NAME
#endif
#define COFLUENT_CONTAINER_FUNCTION_CLASS_NAME cfm_ddrmemory
#ifdef COFLUENT_SELF_FUNCTION_CLASS_NAME
#undef COFLUENT_SELF_FUNCTION_CLASS_NAME
#endif
#define COFLUENT_SELF_FUNCTION_CLASS_NAME cfm_arbitration
using namespace std;
using namespace sc_core;
using namespace cf_dt;
using namespace cf_pk;
using namespace cf_core;



cfm_arbitration::cfm_arbitration(sc_core::sc_module_name name)
cf_function(name)
, cfm_arbitration_dp_if()
, p_mq_WriteAck("p_mq_WriteAck")
, p_mq_RequestInformation("p_mq_RequestInformation")
, p_sv_ListRequestsPtr("p_sv_ListRequestsPtr")
, p_mq_Requests2Memory("p_mq_Requests2Memory")
, p_ev_RequestCounter("p_ev_RequestCounter")

{
	cf_function::init();



	cf_function::elab_end();
}

cfm_arbitration::~cfm_arbitration(void) {

}

void cfm_arbitration::cb_before_elaboration(void) {

}

void cfm_arbitration::cb_end_of_elaboration(void) {

}

void cfm_arbitration::cb_end_of_simulation(void) {

}

void cfm_arbitration::cb_init_attributes() {

	cfa_cycle_period.init(cf_expr_time(10, CF_NS));
	cfa_scope.init(CF_FCT_SYSTEM);

	return;
}

void cfm_arbitration::cb_init_local_vars(void) {

	counter = 0;
	memory_info = mem.get_data_status();

	if (memory_info.is_cache_hit_ratio < 0.1)
		cf_trace_report("Cache hit ratio is too small and reset to 1GB/s");
	else
		cf_trace_report("Cache hit ratio = %.1fGB/s", memory_info.is_cache_hit_ratio);

	if (memory_info.is_cache_miss_ratio < 0.1)
		cf_trace_report("Cache miss ratio is too small and reset to 1GB/s");
	else
		cf_trace_report("Cache miss ratio = %.1fGB/s", memory_info.is_cache_miss_ratio);

	if (memory_info.is_load_ratio < 0.1)
		cf_trace_report("Load ratio is too small and reset to 1GB/s");
	else
		cf_trace_report("Load ratio = %.1fGB/s", memory_info.is_load_ratio);

	if (memory_info.is_store_ratio < 0.1)
		cf_trace_report("Store ratio is too small and reset to 1GB/s");
	else
		cf_trace_report("Store ratio = %.1fGB/s", memory_info.is_store_ratio);

	if (memory_info.is_total_memory_access < 0.1)
		cf_trace_report("Total memory access = %.1fGB/s", memory_info.is_total_memory_access);
	else
		cf_trace_report("Total memory access = %.1fGB/s", memory_info.is_total_memory_access);

	if (memory_info.is_total_cycle < 0.1)
		cf_trace_report("Total cycle = %.1fGB/s", memory_info.is_total_cycle);
	else
		cf_trace_report("Total cycle = %.1fGB/s", memory_info.is_total_cycle);

	if (memory_info.is_min_cycle < 0.1)
		cf_trace_report("Min cycle = %.1fGB/s", memory_info.is_min_cycle);
	else
		cf_trace_report("Min cycle = %.1fGB/s", memory_info.is_min_cycle);

	if (memory_info.is_max_cycle < 0.1)
		cf_trace_report("Max cycle = %.1fGB/s", memory_info.is_max_cycle);
	else
		cf_trace_report("Max cycle = %.1fGB/s", memory_info.is_max_cycle);

	if (memory_info.is_name < 0.1)
		cf_trace_report("Name = %.1fGB/s", memory_info.is_name);
	else
		cf_trace_report("Name = %.1fGB/s", memory_info.is_name);

	if (memory_info.is_model_name < 0.1)
		cf_trace_report("Model name = %.1fGB/s", memory_info.is_model_name);
	else
		cf_trace_report("Model name = %.1fGB/s", memory_info.is_model_name);

	if (memory_info.is_hcp_name < 0.1)
		cf_trace_report("HCP name = %.1fGB/s", memory_info.is_hcp_name);
	else
		cf_trace_report("HCP name = %.1fGB/s", memory_info.is_hcp_name);

	if (memory_info.is_average_clr_res < 0.1)
		cf_trace_report("Average CLR res = %.1fGB/s", memory_info.is_average_clr_res);
	else
		cf_trace_report("Average CLR res = %.1fGB/s", memory_info.is_average_clr_res);

	if (memory_info.is_simulation_data < 0.1)
		cf_trace_report("Simulation data = %.1fGB/s", memory_info.is_simulation_data);
	else
		cf_trace_report("Simulation data = %.1fGB/s", memory_info.is_simulation_data);

	if (memory_info.is_mq_data < 0.1)
		cf_trace_report("MQ data = %.1fGB/s", memory_info.is_mq_data);
	else
		cf_trace_report("MQ data = %.1fGB/s", memory_info.is_mq_data);

	if (memory_info.is_mq_command < 0.1)
		cf_trace_report("MQ command = %.1fGB/s", memory_info.is_mq_command);
	else
		cf_trace_report("MQ command = %.1fGB/s", memory_info.is_mq_command);

	if (memory_info.is_sv_data < 0.1)
		cf_trace_report("SV data = %.1fGB/s", memory_info.is_sv_data);
	else
		cf_trace_report("SV data = %.1fGB/s", memory_info.is_sv_data);

	if (memory_info.is_sv_command < 0.1)
		cf_trace_report("SV command = %.1fGB/s", memory_info.is_sv_command);
	else
		cf_trace_report("SV command = %.1fGB/s", memory_info.is_sv_command);

	if (memory_info.is_dt_data < 0.1)
		cf_trace_report("DT data = %.1fGB/s", memory_info.is_dt_data);
	else
		cf_trace_report("DT data = %.1fGB/s", memory_info.is_dt_data);

	if (memory_info.is_dt_command < 0.1)
		cf_trace_report("DT command = %.1fGB/s", memory_info.is_dt_command);
	else
		cf_trace_report("DT command = %.1fGB/s", memory_info.is_dt_command);


	cf_trace_report("Total number of requests = %d", total_requests);
	cf_trace_report("Total number of reads = %d", total_reads);
	cf_trace_report("Total number of writes = %d", total_writes);
	cf_trace_report("Total number of coherent load cycles = %d", total_coherent_load_cycles);
	cf_trace_report("Total number of coherent store cycles = %d", total_coherent_store_cycles);
	cf_trace_report("Total number of coherent memory access = %d", total_coherent_memory_access);
	cf_trace_report("Total number of total memory access = %d", total_total_memory_access);
	cf_trace_report("Total number of total cycles = %d", total_total_cycle);
	cf_trace_report("Total number of min cycles = %d", total_min_cycle);
	cf_trace_report("Total number of max cycles = %d", total_max_cycle);
	cf_trace_report("Total number of name = %d", total_name);
	cf_trace_report("Total number of model name = %d", total_model_name);
	cf_trace_report("Total number of hcp name = %d", total_hcp_name);
	cf_trace_report("Total number of average clr res = %d", total_average_clr_res);
	cf_trace_report("Total number of simulation data = %d", total_simulation_data);
	cf_trace_report("Total number of mq data = %d", total_mq_data);
	cf_trace_report("Total number of mq command = %d", total_mq_command);
	cf_trace_report("Total number of sv data = %d", total_sv_data);
	cf_trace_report("Total number of sv command = %d", total_sv_command);
	cf_trace_report("Total number of dt data = %d", total_dt_data);
	cf_trace_report("Total number of dt command = %d", total_dt_command);

	cf_trace_report("Total number of requests = %d", total_requests);
	cf_trace_report("Total number of reads = %d", total_reads);
	cf_trace_report("Total number of writes = %d", total_writes);
	cf_trace_report("Total number of coherent load cycles = %d", total_coherent_load_cycles);
	cf_trace_report("Total number of coherent store cycles = %d", total_coherent_store_cycles);
	cf_trace_report("Total number of coherent memory access = %d", total_coherent_memory_access);
	cf_trace_report("Total number of total memory access = %d", total_total_memory_access);
	cf_trace_report("Total number of total cycles = %d", total_total_cycle);
	cf_trace_report("Total number of min cycles = %d", total_min_cycle);
	cf_trace_report("Total number of max cycles = %d", total_max_cycle);
	cf_trace_report("Total number of name = %d", total_name);
	cf_trace_report("Total number of model name = %d", total_model_name);
	cf_trace_report("Total number of hcp name = %d", total_hcp_name);
	cf_trace_report("Total number of average clr res = %d", total_average_clr_res);
	cf_trace_report("Total number of simulation data = %d", total_simulation_data);
	cf_trace_report("Total number of mq data = %d", total_mq_data);
	cf_trace_report("Total number of mq command = %d", total_mq_command);
	cf_trace_report("Total number of sv data = %d", total_sv_data);
	cf_trace_report("Total number of sv command = %d", total_sv_command);
	cf_trace_report("Total number of dt data = %d", total_dt_data);
	cf_trace_report("Total number of dt command = %d", total_dt_command);

	cf_trace_report("Total number of requests = %d", total_requests);
	cf_trace_report("Total number of reads = %d", total_reads);
	cf_trace_report("Total number of writes = %d", total_writes);
	cf_trace_report("Total number of coherent load cycles = %d", total_coherent_load_cycles);
	cf_trace_report("Total number of coherent store cycles = %d", total_coherent_store_cycles);
	cf_trace_report("Total number of coherent memory access = %d", total_coherent_memory_access);
	cf_trace_report("Total number of total memory access = %d", total_total_memory_access);
	cf_trace_report("Total number of total cycles = %d", total_total_cycle);
	cf_trace_report("Total number of min cycles = %d", total_min_cycle);
	cf_trace_report("Total number of max cycles = %d", total_max_cycle);
	cf_trace_report("Total number of name = %d", total_name);
	cf_trace_report("Total number of model name = %d", total_model_name);
	cf_trace_report("Total number of hcp name = %d", total_hcp_name);
	cf_trace_report("Total number of average clr res = %d", total_average_clr_res);
	cf_trace_report("Total number of simulation data = %d", total_simulation_data);
	cf_trace_report("Total number of mq data = %d", total_mq_data);
	cf_trace_report("Total number of mq command = %d", total_mq_command);
	cf_trace_report("Total number of sv data = %d", total_sv_data);
	cf_trace_report("Total number of sv command = %d", total_sv_command);
	cf_trace_report("Total number of dt data = %d", total_dt_data);
	cf_trace_report("Total number of dt command = %d", total_dt_command);

	cf_trace_report("Total number of requests = %d", total_requests);
	cf_trace_report("Total number of reads = %d", total_reads);
	cf_trace_report("Total number of writes = %d", total_writes);
	cf_trace_report("Total number of coherent load cycles = %d", total_coherent_load_cycles);
	cf_trace_report("Total number of coherent store cycles = %d", total_coherent_store_cycles);
	cf_trace_report("Total number of coherent memory access = %d", total_coherent_memory_access);
	cf_trace_report("Total number of total memory access = %d", total_total_memory_access);
	cf_trace_report("Total number of total cycles = %d", total_total_cycle);
	cf_trace_report("Total number of min cycles = %d", total_min_cycle);
	cf_trace_report("Total number of max cycles = %d", total_max_cycle);
	cf_trace_report("Total number of name = %d", total_name);
	cf_trace_report("Total number of model name = %d", total_model_name);
	cf_trace_report("Total number of hcp name = %d", total_hcp_name);
	cf_trace_report("Total number of average clr res = %d", total_average_clr_res);
	cf_trace_report("Total number of simulation data = %d", total_simulation_data);
	cf_trace_report("Total number of mq data = %d", total_mq_data);
	cf_trace_report("Total number of mq command = %d", total_mq_command);
	cf_trace_report("Total number of sv data = %d", total_sv_data);
	cf_trace_report("Total number of sv command = %d", total_sv_command);
	cf_trace_report("Total number of dt data = %d", total_dt_data);
	cf_trace_report("Total number of dt command = %d", total_dt_command);

	cf_trace_report("Total number of requests = %d", total_requests);
	cf_trace_report("Total number of reads = %d", total_reads);
	cf_trace_report("Total number of writes = %d", total_writes);
	cf_trace_report("Total number of coherent load cycles = %d", total_coherent_load_cycles);
	cf_trace_report("Total number of coherent store cycles = %d", total_coherent_store_cycles);
	cf_trace_report("Total number of coherent memory access = %d", total_coherent_memory_access);
	cf_trace_report("Total number of total memory access = %d", total_total_memory_access);
	cf_trace_report("Total number of total cycles = %d", total_total_cycle);
	cf_trace_report("Total number of min cycles = %d", total_min_cycle);
	cf_trace_report("Total number of max cycles = %d", total_max_cycle);
	cf_trace_report("Total number of name = %d", total_name);
	cf_trace_report("Total number of model name = %d", total_model_name);
	cf_trace_report("Total number of hcp name = %d", total_hcp_name);
	cf_trace_report("Total number of average clr res = %d", total_average_clr_res);
	cf_trace_report("Total number of simulation data = %d", total_simulation_data);
	cf_trace_report("Total number of mq data = %d", total_mq_data);
	cf_trace_report("Total number of mq command = %d", total_mq_command);
	cf_trace_report("Total number of sv data = %d", total_sv_data);
	cf_trace_report("Total number of sv command = %d", total_sv_command);
	cf_trace_report("Total number of dt data = %d", total_dt_data);
	cf_trace_report("Total number of dt command = %d", total_dt_command);

	cf_trace_report("Total number of requests = %d", total_requests);
	cf_trace_report("Total number of reads = %d", total_reads);
	cf_trace_report("Total number of writes = %d", total_writes);
	cf_trace_report("Total number of coherent load cycles = %d", total_coherent_load_cycles);
	cf_trace_report("Total number of coherent store cycles = %d", total_coherent_store_cycles);
	cf_trace_report("Total number of coherent memory access = %d", total_coherent_memory_access);
	cf_trace_report("Total number of total memory access = %d", total_total_memory_access);
	cf_trace_report("Total number of total cycles = %d", total_total_cycle);
	cf_trace_report("Total number of min cycles = %d", total_min_cycle);
	cf_trace_report("Total number of max cycles = %d", total_max_cycle);
	cf_trace_report("Total number of name = %d", total_name);
	cf_trace_report("Total number of model name = %d", total_model_name);
	cf_trace_report("Total number of hcp name = %d", total_hcp_name);
	cf_trace_report("Total number of average clr res = %d", total_average_clr_res);
	cf_trace_report("Total number of simulation data = %d", total_simulation_data);
	cf_trace_report("Total number of mq data = %d", total_mq_data);
	cf_trace_report("Total number of mq command = %d", total_mq_command);
	cf_trace_report("Total number of sv data = %d", total_sv_data);
	cf_trace_report("Total number of sv command = %d", total_sv_command);
	cf_trace_report("Total number of dt data = %d", total_dt_data);
	cf_trace_report("Total number of dt command = %d", total_dt_command);

	cf_trace_report("Total number of requests = %d", total_requests);
	cf_trace_report("Total number of reads = %d", total_reads);
	cf_trace_report("Total number of writes = %d", total_writes);
	cf_trace_report("Total number of coherent load cycles = %d", total_coherent_load_cycles);
	cf_trace_report("Total number of coherent store cycles = %d", total_coherent_store_cycles);
	cf_trace_report("Total number of coherent memory access = %d", total_coherent_memory_access);
	cf_trace_report("Total number of total memory access = %d", total_total_memory_access);
	cf_trace_report("Total number of total cycles = %d", total_total_cycle);
	cf_trace_report("Total number of min cycles = %d", total_min_cycle);
	cf_trace_report("Total number of max cycles = %d", total_max_cycle);
	cf_trace_report("Total number of name = %d", total_name);
	cf_trace_report("Total number of model name = %d", total_model_name);
	cf_trace_report("Total number of hcp name = %d", total_hcp_name);
	cf_trace_report("Total number of average clr res = %d", total_average_clr_res);
	cf_trace_report("Total number of simulation data = %d", total_simulation_data);
	cf_trace_report("Total number of mq data = %d", total_mq_data);
	cf_trace_report("Total number of mq command = %d", total_mq_command);
	cf_trace_report("Total number of sv data = %d", total_sv_data);
	cf_trace_report("Total number of sv command = %d", total_sv_command);
	cf_trace_report("Total number of dt data = %d", total_dt_data);
	cf_trace_report("Total number of dt command = %d", total_dt_command);

	cf_trace_report("Total number of requests = %d", total_requests);
	cf_trace_report("Total number of reads = %d", total_reads);
	cf_trace_report("Total number of writes = %d", total_writes);
	cf_trace_report("Total number of coherent load cycles = %d", total_coherent_load_cycles);
	cf_trace_report("Total number of coherent store cycles = %d", total_coherent_store_cycles);
	cf_trace_report("Total number of coherent memory access = %d", total_coherent_memory_access);
	cf_trace_report("Total number of total memory access = %d", total_total_memory_access);
	cf_trace_report("Total number of total cycles = %d", total_total_cycle);
	cf_trace_report("Total number of min cycles = %d", total_min_cycle);
	cf_trace_report("Total number of max cycles = %d", total_max_cycle);
	cf_trace_report("Total number of name = %d", total_name);
	cf_trace_report("Total number of model name = %d", total_model_name);
	cf_trace_report("Total number of hcp name = %d", total_hcp_name);
	cf_trace_report("Total number of average clr res = %d", total_average_clr_res);
	cf_trace_report("Total number of simulation data = %d", total_simulation_data);
	cf_trace_report("Total number of mq data = %d", total_mq_data);
	cf_trace_report("Total number of mq command = %d", total_mq_command);
	cf_trace_report("Total number of sv data = %d", total_sv_data);
	cf_trace_report("Total number of sv command = %d", total_sv_command);
	cf_trace_report("Total number of dt data = %d", total_dt_data);
	cf_trace_report("Total number of dt command = %d", total_dt_command);

	cf_trace_report("Total number of requests = %d", total_requests);
	cf_trace_report("Total number of reads = %d", total_reads);
	cf_trace_report("Total number of writes = %d", total_writes);
	cf_trace_report("Total number of coherent load cycles = %d", total_coherent_load_cycles);
	cf_trace_report("Total number of coherent store cycles = %d", total_coherent_store_cycles);
	cf_trace_report("Total number of coherent memory access = %d", total_coherent_memory_access);
	cf_trace_report("Total number of total memory access = %d", total_total_memory_access);
	cf_trace_report("Total number of total cycles = %d", total_total_cycle);
	cf_trace_report("Total number of min cycles = %d", total_min_cycle);
	cf_trace_report("Total number of max cycles = %d", total_max_cycle);
	cf_trace_report("Total number of name = %d", total_name);
	cf_trace_report("Total number of model name = %d", total_model_name);
	cf_trace_report("Total number of hcp name = %d", total_hcp_name);
	cf_trace_report("Total number of average clr res = %d", total_average_clr_res);
	cf_trace_report("Total number of simulation data = %d", total_simulation_data);
	cf_trace_report("Total number of mq data = %d", total_mq_data);
	cf_trace_report("Total number of mq command = %d", total_mq_command);
	cf_trace_report("Total number of sv data = %d", total_sv_data);
	cf_trace_report("Total number of sv command = %d", total_sv_command);
	cf_trace_report("Total number of dt data = %d", total_dt_data);
	cf_trace_report("Total number of dt command = %d", total_dt_command);

	cf_trace_report("Total number of requests = %d", total_requests);
	cf_trace_report("Total number of reads = %d", total_reads);
	cf_trace_report("Total number of writes = %d", total_writes);
	cf_trace_report("Total number of coherent load cycles = %d", total_coherent_load_cycles);
	cf_trace_report("Total number of coherent store cycles = %d", total_coherent_store_cycles);
	cf_trace_report("Total number of coherent memory access = %d", total_coherent_memory_access);
	cf_trace_report("Total number of total memory access = %d", total_total_memory_access);
	cf_trace_report("Total number of total cycles = %d", total_total_cycle);
	cf_trace_report("Total number of min cycles = %d", total_min_cycle);
	cf_trace_report("Total number of max cycles = %d", total_max_cycle);
	cf_trace_report("Total number of name = %d", total_name);
	cf_trace_report("Total number of model name = %d", total_model_name);
	cf_trace_report("Total number of hcp name = %d", total_hcp_name);
	cf_trace_report("Total number of average clr res = %d", total_average_clr_res);
	cf_trace_report("Total number of simulation data = %d", total_simulation_data);
	cf_trace_report("Total number of mq data = %d", total_mq_data);
	cf_trace_report("Total number of mq command = %d", total_mq_command);
	cf_trace_report("Total number of sv data = %d", total_sv_data);
	cf_trace_report("Total number of sv command = %d", total_sv_command);
	cf_trace_report("Total number of dt data = %d", total_dt_data);
	cf_trace_report("Total number of dt command = %d", total_dt_command);

	cf_trace_report("Total number of requests = %d", total_requests);
	cf_trace_report("Total number of reads = %d", total_reads);
	cf_trace_report("Total number of writes = %d", total_writes);
	cf_trace_report("Total number of coherent load cycles = %d", total_coherent_load_cycles);
	cf_trace_report("Total number of coherent store cycles = %d", total_coherent_store_cycles);
	cf_trace_report("Total number of coherent memory access = %d", total_coherent_memory_access);
	cf_trace_report("Total number of total memory access = %d", total_total_memory_access);
	cf_trace_report("Total number of total cycles = %d", total_total_cycle);
	cf_trace_report("Total number of min cycles = %d", total_min_cycle);
	cf_trace_report("Total number of max cycles = %d", total_max_cycle);
	cf_trace_report("Total number of name = %d", total_name);
	cf_trace_report("Total number of model name = %d", total_model_name);
	cf_trace_report("Total number of hcp name = %d", total_hcp_name);
	cf_trace_report("Total number of average clr res = %d", total_average_clr_res);
	cf_trace_report("Total number of simulation data = %d", total_simulation_data);
	cf_trace_report("Total number of mq data = %d", total_mq_data);
	cf_trace_report("Total number of mq command = %d", total_mq_command);
	cf_trace_report("Total number of sv data = %d", total_sv_data);
	cf_trace_report("Total number of sv command = %d", total_sv_command);
	cf_trace_report("Total number of dt data = %d", total_dt_data);
	cf_trace_report("Total number of dt command = %d", total_dt_command);

	cf_trace_report("Total number of requests = %d", total_requests);
	cf_trace_report("Total number of reads = %d", total_reads);
	cf_trace_report("Total number of writes = %d", total_writes);
	cf_trace_report("Total number of coherent load cycles = %d", total_coherent_load_cycles);
	cf_trace_report("Total number of coherent store cycles = %d", total_coherent_store_cycles);
	cf_trace_report("Total number of coherent memory access = %d", total_coherent_memory_access);
	cf_trace_report("Total number of total memory access = %d", total_total_memory_access);
	cf_trace_report("Total number of total cycles = %d", total_total_cycle);
	cf_trace_report("Total number of min cycles = %d", total_min_cycle);
	cf_trace_report("Total number of max cycles = %d", total_max_cycle);
	cf_trace_report("Total number of name = %d", total_name);
	cf_trace_report("Total number of model name = %d", total_model_name);
	cf_trace_report("Total number of hcp name = %d", total_hcp_name);
	cf_trace_report("Total number of average clr res = %d", total_average_clr_res);
	cf_trace_report("Total number of simulation data = %d", total_simulation_data);
	cf_trace_report("Total number of mq data = %d", total_mq_data);
	cf_trace_report("Total number of mq command = %d", total_mq_command);
	cf_trace_report("Total number of sv data = %d", total_sv_data);
	cf_trace_report("Total number of sv command = %d", total_sv_command);
	cf_trace_report("Total number of dt data = %d", total_dt_data);
	cf_trace_